<!-- Tab: B√©n√©voles -->
<div x-show="activeTab === 'benevoles'">
    <div class="brutal-card bg-brutal-white p-8">
        <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
            <h2 class="text-4xl font-black uppercase tracking-tight">Liste des b√©n√©voles</h2>
            <div class="w-full md:w-1/3 relative">
                <input type="text" x-model="searchQuery" placeholder="Rechercher un b√©n√©vole..."
                    class="brutal-input w-full pl-12 pr-10 py-3 font-bold text-lg shadow-brutal-sm focus:shadow-brutal transition-all">
                <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl">üîç</span>
                <button x-show="searchQuery" @click="searchQuery = ''"
                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-xl font-black hover:text-brutal-red transition-colors">
                    ‚úï
                </button>
            </div>
        </div>

        <!-- Empty State -->
        <div x-show="getFilteredBenevoles().length === 0"
            class="text-center py-16 bg-gray-50 border-3 border-dashed border-gray-300 rounded-lg">
            <div class="text-6xl mb-4">ü§∑‚Äç‚ôÇÔ∏è</div>
            <h3 class="text-2xl font-black text-gray-400 uppercase">Aucun b√©n√©vole trouv√©</h3>
            <p class="font-bold text-gray-400 mt-2">Essayez une autre recherche.</p>
        </div>

        <!-- Table -->
        <div x-show="getFilteredBenevoles().length > 0" class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="border-b-4 border-brutal-black">
                        <th class="py-4 px-4 font-black uppercase tracking-wider text-sm">Identit√©</th>
                        <th class="py-4 px-4 font-black uppercase tracking-wider text-sm">Contact</th>
                        <th class="py-4 px-4 font-black uppercase tracking-wider text-sm">T-shirt</th>
                        <th class="py-4 px-4 font-black uppercase tracking-wider text-sm text-center">Inscriptions</th>
                        <th class="py-4 px-4 font-black uppercase tracking-wider text-sm text-center">R√©f√©rent</th>
                        <th class="py-4 px-4 font-black uppercase tracking-wider text-sm">R√¥le</th>
                        <th class="py-4 px-4 font-black uppercase tracking-wider text-sm text-right">Actions</th>
                    </tr>
                </thead>
                <tbody class="text-brutal-black">
                    <template x-for="benevole in getFilteredBenevoles()" :key="benevole.id">
                        <tr class="border-b-2 border-gray-200 hover:bg-yellow-50 transition-colors group">
                            <td class="py-4 px-4 align-middle">
                                <div class="font-black text-lg leading-tight"
                                    x-text="benevole.prenom + ' ' + benevole.nom"></div>
                            </td>
                            <td class="py-4 px-4 align-middle">
                                <div class="font-bold text-sm" x-text="benevole.email"></div>
                                <div class="text-xs font-mono mt-1 text-gray-600"
                                    x-text="benevole.telephone || 'Pas de tel'"></div>
                            </td>
                            <td class="py-4 px-4 align-middle font-bold" x-text="benevole.taille_tshirt"></td>
                            <td class="py-4 px-4 align-middle text-center">
                                <span
                                    class="inline-block w-8 h-8 leading-8 rounded-full bg-brutal-ice border-2 border-brutal-black font-black text-sm"
                                    :class="{'bg-gray-200 text-gray-400 border-gray-400': benevole.nb_inscriptions === 0}"
                                    x-text="benevole.nb_inscriptions"></span>
                            </td>
                            <td class="py-4 px-4 align-middle text-center">
                                <span x-show="benevole.nb_postes_referent > 0"
                                    class="inline-block w-8 h-8 leading-8 rounded-full bg-brutal-yellow border-2 border-brutal-black font-black text-sm"
                                    x-text="benevole.nb_postes_referent"></span>
                                <span x-show="!benevole.nb_postes_referent || benevole.nb_postes_referent === 0"
                                    class="text-gray-300 font-bold">-</span>
                            </td>
                            <td class="py-4 px-4 align-middle">
                                <template x-if="benevole.role === 'admin'">
                                    <span
                                        class="inline-flex items-center px-3 py-1 bg-brutal-black text-brutal-white text-xs font-black uppercase tracking-wider border-2 border-brutal-black">
                                        üîê Admin
                                    </span>
                                </template>
                                <template x-if="benevole.role !== 'admin'">
                                    <div class="relative inline-block w-full max-w-[140px]">
                                        <select :value="benevole.role"
                                            @change="updateBenevoleRole(benevole.id, $event.target.value)"
                                            class="appearance-none w-full bg-white border-2 border-brutal-black px-3 py-1 pr-8 text-sm font-bold focus:shadow-brutal-sm focus:outline-none cursor-pointer transition-shadow"
                                            :class="{
                                                'bg-brutal-ice': benevole.role === 'referent'
                                            }">
                                            <option value="benevole">üë§ B√©n√©vole</option>
                                            <option value="referent">üëî R√©f√©rent</option>
                                        </select>
                                        <div
                                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-brutal-black">
                                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg"
                                                viewBox="0 0 20 20">
                                                <path
                                                    d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                                            </svg>
                                        </div>
                                    </div>
                                </template>
                            </td>
                            <td class="py-4 px-4 align-middle text-right">
                                <button @click="viewBenevoleInscriptions(benevole)"
                                    class="brutal-btn-sm bg-white text-brutal-black border-2 border-brutal-black px-3 py-2 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all"
                                    title="Voir les inscriptions">
                                    üìã <span class="hidden lg:inline ml-1 font-bold text-xs uppercase">D√©tails</span>
                                </button>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Legend -->
        <div class="mt-8 pt-6 border-t-4 border-brutal-black flex flex-wrap gap-6 text-sm">
            <div class="flex items-center gap-2">
                <span class="w-3 h-3 bg-brutal-ice border border-brutal-black"></span>
                <span class="font-bold">R√©f√©rent</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-3 h-3 bg-brutal-black"></span>
                <span class="font-bold">Admin</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-3 h-3 bg-brutal-yellow border border-brutal-black"></span>
                <span class="font-bold">Postes g√©r√©s</span>
            </div>
        </div>
    </div>

    <!-- Modal Inscriptions -->
    <div x-show="showInscriptionsModal" class="fixed inset-0 z-50 flex items-center justify-center p-4"
        style="display: none;">
        <div class="absolute inset-0 bg-brutal-black opacity-80 backdrop-blur-sm" @click="closeInscriptionsModal()">
        </div>
        <div class="relative bg-brutal-white border-4 border-brutal-black p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-brutal-lg"
            @click.stop>
            <div class="flex justify-between items-start mb-8">
                <div>
                    <h3 class="text-3xl font-black uppercase italic">Inscriptions</h3>
                    <p class="text-xl font-bold text-gray-600" x-text="selectedBenevoleName"></p>
                </div>
                <button @click="closeInscriptionsModal()"
                    class="w-10 h-10 flex items-center justify-center border-2 border-brutal-black bg-white hover:bg-brutal-red hover:text-white transition-colors font-black text-xl shadow-brutal-sm">
                    ‚úï
                </button>
            </div>

            <template x-if="selectedBenevoleInscriptions.length === 0">
                <div class="text-center py-16 bg-gray-50 border-3 border-dashed border-gray-300">
                    <div class="text-4xl mb-2">üò¥</div>
                    <p class="font-black text-gray-400 text-lg uppercase">Aucune inscription</p>
                </div>
            </template>

            <template x-if="selectedBenevoleInscriptions.length > 0">
                <div class="space-y-4">
                    <template x-for="inscription in selectedBenevoleInscriptions" :key="inscription.id">
                        <div
                            class="border-3 border-brutal-black p-5 bg-white shadow-brutal-sm hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all group">
                            <div class="flex justify-between items-start gap-4">
                                <div>
                                    <h4 class="font-black text-lg leading-tight group-hover:text-brutal-blue transition-colors"
                                        x-text="inscription.poste_titre"></h4>
                                    <div class="flex items-center gap-2 mt-2">
                                        <span
                                            class="px-2 py-0.5 bg-brutal-ice border border-brutal-black text-xs font-bold uppercase"
                                            x-text="inscription.periode_nom"></span>
                                    </div>
                                </div>
                                <div class="flex flex-col items-end">
                                    <span
                                        class="px-3 py-1 bg-brutal-green text-brutal-black border-2 border-brutal-black font-black text-xs uppercase tracking-wider">
                                        INSCRIT
                                    </span>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </template>

            <div class="mt-8 flex justify-end">
                <button @click="closeInscriptionsModal()"
                    class="brutal-btn bg-brutal-black text-brutal-white hover:bg-gray-800">
                    Fermer
                </button>
            </div>
        </div>
    </div>
</div>