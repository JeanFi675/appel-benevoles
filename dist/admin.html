<!doctype html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Administration - BÃ©nÃ©voles Escalade</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet"><script type="module" crossorigin src="./assets/admin--Hnkr_BT.js"></script><link rel="modulepreload" crossorigin href="./assets/utils-Byl3V9oy.js"><link rel="stylesheet" crossorigin href="./assets/utils-DfUHBg8r.css"></head><body class="bg-brutal-ice min-h-screen" x-data="adminApp()" x-init="init()"><div class="fixed top-4 right-4 z-50 space-y-2"><template x-for="toast in toasts" :key="toast.id"><div class="toast brutal-card px-6 py-4 max-w-md" :class="toast.type === 'error' ? 'bg-brutal-black text-brutal-ice' : 'bg-brutal-ice text-brutal-black'"><p class="font-bold" x-text="toast.message"></p></div></template></div><header class="bg-brutal-black text-brutal-white py-8 mb-8 border-b-8 border-brutal-black"><div class="container mx-auto px-4"><div class="flex justify-between items-center"><div><h1 class="text-5xl font-black tracking-tight">ğŸ” ADMIN PANEL</h1><p class="text-xl font-body mt-2">Gestion des bÃ©nÃ©voles et postes</p></div><a href="index.html" class="brutal-btn bg-brutal-ice text-brutal-black px-6 py-3 shadow-brutal-sm">â† Retour</a></div></div></header><main class="container mx-auto px-4 pb-12"><div x-show="!isAdmin && !loading" class="brutal-card bg-brutal-white p-8 max-w-2xl mx-auto text-center"><h2 class="text-3xl font-black mb-4">ğŸš« AccÃ¨s refusÃ©</h2><p class="text-lg font-bold mb-6">Vous n'avez pas les droits d'administrateur.</p><a href="index.html" class="brutal-btn bg-brutal-ice px-6 py-3 shadow-brutal inline-block">Retour Ã  l'accueil</a></div><div x-show="loading && !isAdmin" class="brutal-card bg-brutal-white p-8 max-w-2xl mx-auto text-center"><p class="text-2xl font-black">â³ VÃ©rification des droits...</p></div><div x-show="isAdmin" style="display:none"><div class="brutal-card bg-brutal-white mb-8 flex overflow-x-auto"><button @click="activeTab = 'postes'" class="tab-button px-8 py-4 font-black text-lg" :class="{ 'active': activeTab === 'postes' }">ğŸ“‹ Postes</button> <button @click="activeTab = 'periodes'" class="tab-button px-8 py-4 font-black text-lg" :class="{ 'active': activeTab === 'periodes' }">ğŸ“… PÃ©riodes</button> <button @click="activeTab = 'benevoles'" class="tab-button px-8 py-4 font-black text-lg" :class="{ 'active': activeTab === 'benevoles' }">ğŸ‘¥ BÃ©nÃ©voles</button></div><div x-show="activeTab === 'postes'"><div class="brutal-card bg-brutal-white p-8 mb-8"><h2 class="text-3xl font-black mb-6" x-text="editingPoste ? 'Modifier un poste' : 'Ajouter un poste'"></h2><form @submit.prevent="savePoste()"><div class="grid md:grid-cols-2 gap-4 mb-4"><div><label class="block font-bold mb-2">Titre *</label> <input x-model="posteForm.titre" required class="brutal-input w-full px-4 py-3" placeholder="Juge de bloc"></div><div><label class="block font-bold mb-2">PÃ©riode *</label> <select x-model="posteForm.periode_id" required class="brutal-input w-full px-4 py-3 font-bold"><option value="">-- SÃ©lectionnez une pÃ©riode --</option><template x-for="periode in periodes" :key="periode.id"><option :value="periode.id" x-text="periode.nom"></option></template></select></div></div><div class="grid md:grid-cols-2 gap-4 mb-4"><div><label class="block font-bold mb-2">DÃ©but *</label> <input type="datetime-local" x-model="posteForm.periode_debut" required class="brutal-input w-full px-4 py-3"></div><div><label class="block font-bold mb-2">Fin *</label> <input type="datetime-local" x-model="posteForm.periode_fin" required class="brutal-input w-full px-4 py-3"></div></div><div class="grid md:grid-cols-2 gap-4 mb-4"><div><label class="block font-bold mb-2">Minimum *</label> <input type="number" x-model.number="posteForm.nb_min" required min="1" class="brutal-input w-full px-4 py-3"></div><div><label class="block font-bold mb-2">Maximum *</label> <input type="number" x-model.number="posteForm.nb_max" required min="1" class="brutal-input w-full px-4 py-3"></div></div><div class="mb-4"><label class="block font-bold mb-2">RÃ©fÃ©rent</label> <select x-model="posteForm.referent_id" class="brutal-input w-full px-4 py-3 font-bold"><option value="">-- Aucun rÃ©fÃ©rent --</option><template x-for="benevole in referents" :key="benevole.id"><option :value="benevole.id" x-text="benevole.prenom + ' ' + benevole.nom"></option></template></select></div><div class="mb-6"><label class="block font-bold mb-2">Description</label> <textarea x-model="posteForm.description" class="brutal-input w-full px-4 py-3" rows="3" placeholder="DÃ©tails du poste..."></textarea></div><div class="flex gap-4"><button type="submit" :disabled="loading" class="brutal-btn bg-brutal-ice flex-1 py-4 text-xl shadow-brutal"><span x-show="!loading" x-text="editingPoste ? 'ğŸ’¾ Enregistrer' : 'âœ… CrÃ©er le poste'"></span> <span x-show="loading">â³ Enregistrement...</span></button> <button x-show="editingPoste" type="button" @click="cancelEdit()" class="brutal-btn bg-gray-300 px-6 py-4 text-xl shadow-brutal">âŒ Annuler</button></div></form></div><div class="brutal-card bg-brutal-white p-8"><h2 class="text-3xl font-black mb-6">Liste des postes</h2><div class="overflow-x-auto"><table class="w-full"><thead><tr class="border-b-4 border-brutal-black"><th class="text-left py-3 px-2 font-black">Titre</th><th class="text-left py-3 px-2 font-black">PÃ©riode</th><th class="text-left py-3 px-2 font-black">Horaires</th><th class="text-left py-3 px-2 font-black">Min / Max</th><th class="text-left py-3 px-2 font-black">Inscrits</th><th class="text-left py-3 px-2 font-black">Actions</th></tr></thead><tbody><template x-for="poste in postes" :key="poste.id"><tr class="border-b-2 border-gray-300"><td class="py-3 px-2 font-bold" x-text="poste.titre"></td><td class="py-3 px-2 font-bold" x-text="poste.periode_nom"></td><td class="py-3 px-2 font-bold text-sm"><span x-text="formatDateTime(poste.periode_debut)"></span><br><span x-text="formatDateTime(poste.periode_fin)"></span></td><td class="py-3 px-2 font-bold text-center"><span x-text="poste.nb_min"></span> / <span x-text="poste.nb_max"></span></td><td class="py-3 px-2 font-bold text-center"><span x-text="poste.inscrits_actuels || 0"></span></td><td class="py-3 px-2"><div class="flex gap-2"><button @click="editPoste(poste)" class="brutal-btn bg-brutal-ice px-4 py-2 shadow-brutal-sm text-sm">âœï¸ Modifier</button> <button @click="deletePoste(poste.id)" class="brutal-btn bg-red-500 text-white px-4 py-2 shadow-brutal-sm text-sm">ğŸ—‘ï¸ Supprimer</button></div></td></tr></template></tbody></table></div></div></div><div x-show="activeTab === 'periodes'"><div class="brutal-card bg-brutal-white p-8 mb-8"><h2 class="text-3xl font-black mb-6">Ajouter une pÃ©riode</h2><form @submit.prevent="createPeriode()"><div class="grid md:grid-cols-2 gap-4 mb-4"><div><label class="block font-bold mb-2">Nom *</label> <input x-model="periodeForm.nom" required class="brutal-input w-full px-4 py-3" placeholder="Qualifications Samedi"></div><div><label class="block font-bold mb-2">Ordre d'affichage *</label> <input type="number" x-model.number="periodeForm.ordre" required min="1" class="brutal-input w-full px-4 py-3"><p class="text-sm mt-1">Les pÃ©riodes sont affichÃ©es dans l'ordre croissant</p></div></div><button type="submit" :disabled="loading" class="brutal-btn bg-brutal-ice w-full py-4 text-xl shadow-brutal"><span x-show="!loading">âœ… CrÃ©er la pÃ©riode</span> <span x-show="loading">â³ CrÃ©ation...</span></button></form></div><div class="brutal-card bg-brutal-white p-8"><h2 class="text-3xl font-black mb-6">Liste des pÃ©riodes</h2><div class="overflow-x-auto"><table class="w-full"><thead><tr class="border-b-4 border-brutal-black"><th class="text-left py-3 px-2 font-black">Ordre</th><th class="text-left py-3 px-2 font-black">Nom</th><th class="text-left py-3 px-2 font-black">Nb postes</th><th class="text-left py-3 px-2 font-black">Actions</th></tr></thead><tbody><template x-for="periode in periodes" :key="periode.id"><tr class="border-b-2 border-gray-300"><td class="py-3 px-2"><input type="number" :value="periode.ordre" @change="updatePeriodeOrder(periode.id, $event.target.value)" class="brutal-input w-20 px-2 py-1 text-center font-black" min="1"></td><td class="py-3 px-2 font-bold" x-text="periode.nom"></td><td class="py-3 px-2 font-bold text-center"><span x-text="getPostesCountForPeriode(periode.id)"></span></td><td class="py-3 px-2"><button @click="deletePeriode(periode.id)" :disabled="getPostesCountForPeriode(periode.id) > 0" class="brutal-btn px-4 py-2 shadow-brutal-sm text-sm" :class="getPostesCountForPeriode(periode.id) > 0 ? 'bg-gray-300 text-gray-600 cursor-not-allowed' : 'bg-red-500 text-white'">ğŸ—‘ï¸ Supprimer</button></td></tr></template></tbody></table></div><div class="mt-6 p-4 bg-yellow-100 border-3 border-brutal-black"><p class="font-bold">ğŸ’¡ <strong>Note :</strong> Vous ne pouvez pas supprimer une pÃ©riode qui contient des postes. Supprimez d'abord tous les postes de la pÃ©riode.</p></div></div></div><div x-show="activeTab === 'benevoles'"><div class="brutal-card bg-brutal-white p-8"><h2 class="text-3xl font-black mb-6">Liste des bÃ©nÃ©voles</h2><div class="overflow-x-auto"><table class="w-full"><thead><tr class="border-b-4 border-brutal-black"><th class="text-left py-3 px-2 font-black">Nom</th><th class="text-left py-3 px-2 font-black">Email</th><th class="text-left py-3 px-2 font-black">TÃ©lÃ©phone</th><th class="text-left py-3 px-2 font-black">T-shirt</th><th class="text-left py-3 px-2 font-black">Inscriptions</th><th class="text-left py-3 px-2 font-black">Postes rÃ©fÃ©rent</th><th class="text-left py-3 px-2 font-black">RÃ´le</th></tr></thead><tbody><template x-for="benevole in benevoles" :key="benevole.id"><tr class="border-b-2 border-gray-300"><td class="py-3 px-2 font-bold"><span x-text="benevole.prenom + ' ' + benevole.nom"></span></td><td class="py-3 px-2 font-bold text-sm" x-text="benevole.email"></td><td class="py-3 px-2 font-bold" x-text="benevole.telephone || '-'"></td><td class="py-3 px-2 font-bold" x-text="benevole.taille_tshirt"></td><td class="py-3 px-2 font-bold text-center" x-text="benevole.nb_inscriptions"></td><td class="py-3 px-2 font-bold text-center" x-text="benevole.nb_postes_referent || 0"></td><td class="py-3 px-2"><template x-if="benevole.role === 'admin'"><span class="px-3 py-1 font-bold text-sm border-3 border-brutal-black bg-brutal-black text-brutal-white">ğŸ” Admin</span></template><template x-if="benevole.role !== 'admin'"><select :value="benevole.role" @change="updateBenevoleRole(benevole.id, $event.target.value)" class="brutal-input px-3 py-1 text-sm font-bold" :class="{
                        'bg-brutal-ice text-brutal-black': benevole.role === 'referent',
                        'bg-gray-200 text-brutal-black': benevole.role === 'benevole'
                      }"><option value="benevole">ğŸ‘¤ BÃ©nÃ©vole</option><option value="referent">ğŸ‘” RÃ©fÃ©rent</option></select></template></td></tr></template></tbody></table></div><div class="mt-6 p-4 bg-blue-100 border-3 border-brutal-black"><p class="font-bold">ğŸ’¡ <strong>RÃ´les :</strong></p><ul class="mt-2 list-disc list-inside font-bold text-sm"><li><strong>ğŸ‘¤ BÃ©nÃ©vole :</strong> Peut s'inscrire aux postes</li><li><strong>ğŸ‘” RÃ©fÃ©rent :</strong> Peut Ãªtre dÃ©signÃ© comme rÃ©fÃ©rent d'un poste</li><li><strong>ğŸ” Admin :</strong> AccÃ¨s complet Ã  l'administration (Ã  dÃ©finir via Supabase SQL uniquement)</li></ul></div></div></div></div></main></body></html>